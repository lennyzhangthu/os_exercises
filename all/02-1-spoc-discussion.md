#lec 3 SPOC Discussion

## 第三讲 启动、中断、异常和系统调用-思考题

## 3.1 BIOS
 1. 比较UEFI和BIOS的区别。
 答：UEFI抛去了传统BIOS需要长时间自检的问题，让硬件初始化以及引导系统变得简洁快速。换种方式说，UEFI已经把电脑的BIOS变得不像是BIOS，而是一个小型固化在主板上的操作系统一样，加上UEFI本身的开发语言已经从汇编转变成C语言，高级语言的加入让厂商深度开发UEFI变为可能。

 2. 描述PXE的大致启动流程。
 答： 检查BIOS设置，看Intergrated peripherals内是否有bootrom或相关选项，如果有则支持网络启动，将其设置为允许，并选择需要的PXE或RPL协议，再设置首选启动设备为LAN即可；如果没有类似选项，可将所有启动选项都设置为LAN，关闭boot other device，启动后看是否有pxe或RPL的提示信息，如果没有则确定主板不支持pxe或rpl的远程启动，否则支持。如果支持网络远程启动，对于realtek网卡可以通过shift+F10进入设置项，intel网卡可以通过ctrl+s进入设置。按下电源开关，系统开始自检，当自检完硬盘、光驱后，出现以下提示：
“Realtek RTL 8139 (A/B/C)/RTL8130 Boot Agent Press Shift-F10 to configue……”
此信息默认为停留3秒钟，此时，按下SHIFT--F10进入网卡配置菜单，共有四个选择：
按下电源开关，系统开始自检，当自检完硬盘、光驱后，出现以下提示：
Realtek RTL 8139 (A/B/C)/RTL8130 Boot Agent Press Shift-F10 to configue…… 
此信息默认为停留3秒钟，此时，按下SHIFT--F10进入网卡配置菜单。

## 3.2 系统启动流程
 1. 了解NTLDR的启动流程。
 答：已了解

 2. 了解GRUB的启动流程。
 答：已了解

 3. 比较NTLDR和GRUB的功能有差异。
 答：NTLDR一般存放于C盘根目录下，是一个具有隐藏和只读属性的系统文件。它的主要职责是解析Boot.ini文件是系统加载程序，位置在系统盘的根目录，用来装载操作系统。是windows nt 4.0/windows 2000/windows xp/windows server 2003的引导文件，所以应该在系统正常的时候给予备份。
     GNU GRUB是一个来自GNU项目的多操作系统启动程序，是一个多重操作系统启动管理器。GRUB是多启动规范的实现，它允许用户可以在计算机内同时拥有多个操作系统，并在计算机启动时选择希望运行的操作系统。GRUB可用于选择操作系统分区上的不同内核，也可用于向这些内核传递启动参数。

 4. 了解u-boot的功能。
 答：已了解

## 3.3 中断、异常和系统调用比较
 1. 举例说明Linux中有哪些中断，哪些异常？
 答：中断分为可屏蔽中断和不可屏蔽中断。

     异常分为：
     系统热重启，CPU各寄存器状态为运行时的状态。Exception引起（SYS_ERROR0号）系统调用；
     出现未知异常，linux可以将发生异常时相关的寄存器信息打印至控制台；
     Linux通过Software interrupt对应用程序提供系统调用功能；
     取指异常，Linux内存管理模块在发生该异常时进行处理，可能执行分配内存、换入内存等操作；
     访问虚拟地址时发生的异常，Linux的内存管理、设备驱动、进程调度等模块可能处理该异常。进行内存分配、换入内存、进程休      眠、调度等操作；
     异步中断异常，通常与设备驱动有关，也可能引起进程调度模块进行切换进程等工作；
     快速异步中断异常，Linux通常不使用这种Exception。

 2. Linux的系统调用有哪些？大致的功能分类有哪些？  (w2l1)

```
  + 采分点：说明了Linux的大致数量（上百个），说明了Linux系统调用的主要分类（文件操作，进程管理，内存管理等）
  - 答案没有涉及上述两个要点；（0分）
  - 答案对上述两个要点中的某一个要点进行了正确阐述（1分）
  - 答案对上述两个要点进行了正确阐述（2分）
  - 答案除了对上述两个要点都进行了正确阐述外，还进行了扩展和更丰富的说明（3分）
 ```
 
 3. 以ucore lab8的answer为例，uCore的系统调用有哪些？大致的功能分类有哪些？(w2l1)
 
 ```
  + 采分点：说明了ucore的大致数量（二十几个），说明了ucore系统调用的主要分类（文件操作，进程管理，内存管理等）
  - 答案没有涉及上述两个要点；（0分）
  - 答案对上述两个要点中的某一个要点进行了正确阐述（1分）
  - 答案对上述两个要点进行了正确阐述（2分）
  - 答案除了对上述两个要点都进行了正确阐述外，还进行了扩展和更丰富的说明（3分）
 ```
 
## 3.4 linux系统调用分析
 1. 通过分析[lab1_ex0](https://github.com/chyyuu/ucore_lab/blob/master/related_info/lab1/lab1-ex0.md)了解Linux应用的系统调用编写和含义。(w2l1)
 

 ```
  + 采分点：说明了objdump，nm，file的大致用途，说明了系统调用的具体含义
  - 答案没有涉及上述两个要点；（0分）
  - 答案对上述两个要点中的某一个要点进行了正确阐述（1分）
  - 答案对上述两个要点进行了正确阐述（2分）
  - 答案除了对上述两个要点都进行了正确阐述外，还进行了扩展和更丰富的说明（3分）
 
 ```
 
 2. 通过调试[lab1_ex1](https://github.com/chyyuu/ucore_lab/blob/master/related_info/lab1/lab1-ex1.md)了解Linux应用的系统调用执行过程。(w2l1)
 

 ```
  + 采分点：说明了strace的大致用途，说明了系统调用的具体执行过程（包括应用，CPU硬件，操作系统的执行过程）
  - 答案没有涉及上述两个要点；（0分）
  - 答案对上述两个要点中的某一个要点进行了正确阐述（1分）
  - 答案对上述两个要点进行了正确阐述（2分）
  - 答案除了对上述两个要点都进行了正确阐述外，还进行了扩展和更丰富的说明（3分）
 ```
 
## 3.5 ucore系统调用分析
 1. ucore的系统调用中参数传递代码分析。
 1. ucore的系统调用中返回结果的传递代码分析。
 1. 以ucore lab8的answer为例，分析ucore 应用的系统调用编写和含义。
 1. 以ucore lab8的answer为例，尝试修改并运行代码，分析ucore应用的系统调用执行过程。
 
## 3.6 请分析函数调用和系统调用的区别
 1. 请从代码编写和执行过程来说明。
   1. 说明`int`、`iret`、`call`和`ret`的指令准确功能
 
